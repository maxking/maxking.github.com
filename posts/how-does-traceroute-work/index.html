<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>How does traceroute work? | maxking's blog</title><meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="How does traceroute work? traceroute is a tool that people often use to determine the path of a packet as it starts from your machine to your destination server. On Ubuntu systems you can install it using the following command:
$ sudo apt install traceroute  Then you can use it to trace the route back to let’s say this server (asynchronous.in) :
$ traceroute asynchronous.in traceroute to asynchronous.in (104.24.120.93), 30 hops max, 60 byte packets 1 10.">
<meta name=generator content="Hugo 0.93.2">
<meta name=robots content="noindex, nofollow">
<link rel=stylesheet href=/ananke/css/main.min.css>
<meta property="og:title" content="How does traceroute work?">
<meta property="og:description" content="How does traceroute work? traceroute is a tool that people often use to determine the path of a packet as it starts from your machine to your destination server. On Ubuntu systems you can install it using the following command:
$ sudo apt install traceroute  Then you can use it to trace the route back to let’s say this server (asynchronous.in) :
$ traceroute asynchronous.in traceroute to asynchronous.in (104.24.120.93), 30 hops max, 60 byte packets 1 10.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://maxking.github.io/posts/how-does-traceroute-work/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2017-08-06T09:40:53+00:00">
<meta property="article:modified_time" content="2017-08-06T09:40:53+00:00">
<meta itemprop=name content="How does traceroute work?">
<meta itemprop=description content="How does traceroute work? traceroute is a tool that people often use to determine the path of a packet as it starts from your machine to your destination server. On Ubuntu systems you can install it using the following command:
$ sudo apt install traceroute  Then you can use it to trace the route back to let’s say this server (asynchronous.in) :
$ traceroute asynchronous.in traceroute to asynchronous.in (104.24.120.93), 30 hops max, 60 byte packets 1 10."><meta itemprop=datePublished content="2017-08-06T09:40:53+00:00">
<meta itemprop=dateModified content="2017-08-06T09:40:53+00:00">
<meta itemprop=wordCount content="501">
<meta itemprop=keywords content><meta name=twitter:card content="summary">
<meta name=twitter:title content="How does traceroute work?">
<meta name=twitter:description content="How does traceroute work? traceroute is a tool that people often use to determine the path of a packet as it starts from your machine to your destination server. On Ubuntu systems you can install it using the following command:
$ sudo apt install traceroute  Then you can use it to trace the route back to let’s say this server (asynchronous.in) :
$ traceroute asynchronous.in traceroute to asynchronous.in (104.24.120.93), 30 hops max, 60 byte packets 1 10.">
</head><body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/ class="f3 fw2 hover-white no-underline white-90 dib">
maxking's blog
</a>
<div class="flex-l items-center">
<div class=ananke-socials>
</div></div></div></nav></div></header><main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside><div id=sharing class="mt3 ananke-socials">
</div><h1 class="f1 athelas mt3 mb1">How does traceroute work?</h1><time class="f6 mv4 dib tracked" datetime=2017-08-06T09:40:53Z>August 6, 2017</time>
</header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id=how-does-traceroute-work>How does traceroute work?</h1><p><code>traceroute</code> is a tool that people often use to determine the path of a packet as it starts from your machine to your destination server. On Ubuntu systems you can install it using the following command:</p><pre><code>$ sudo apt install traceroute
</code></pre><p>Then you can use it to trace the route back to let’s say this server (asynchronous.in) :</p><pre><code>$ traceroute asynchronous.in  
traceroute to asynchronous.in (104.24.120.93), 30 hops max, 60 byte packets
 1  10.249.0.2 (10.249.0.2)  2.242 ms  2.087 ms  2.239 ms
 2  mc2-...oregonstate.edu (128.193.106.132)  2.557 ms  2.515 ms  3.150 ms
 3  mc2-HUB.cr.net.oregonstate.edu (128.193.106.130)  2.556 ms  2.519 ms  2.763 ms
 4  ob1.oregonstate.edu (128.193.88.50)  2.983 ms  3.261 ms  3.102 ms
 5  ob2.oregonstate.edu (128.193.88.66)  3.313 ms  2.930 ms  2.889 ms
 6  50.232.212.105 (50.232.212.105)  3.192 ms  4.157 ms  3.883 ms
 7  ae-50-....or.bverton.comcast.net (68.87.222.133)  24.748 ms  24.611 ms  24.551 ms
 8  be-...1.seattle.wa.ibone.comcast.net (68.86.92.217)  12.829 ms  14.872 ms  12.749 ms
 9  be-...2.seattle.wa.ibone.comcast.net (68.86.86.226)  10.011 ms  10.142 ms  11.963 ms
10  66.208.229.58 (66.208.229.58)  9.444 ms  9.401 ms  9.712 ms
11  104.24.120.93 (104.24.120.93)  9.831 ms  10.114 ms  11.886 ms
</code></pre><p>Wow! That sounds like fun! But how does it even work?</p><p>So, the implementation of traceroute in GNU/Linux uses <a href=https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol>ICMP protocol</a>. It is a Layer 2 protocol and is also used in other network tools like <code>ping</code> for example. ICMP protocol is typically used for network debugging and don’t really carry forward any data. Any error in the path of the packet is relayed back to the source IP address.</p><p>ICMP protocol has this header called as TTL (Time To Live), also called as <em>max no. of hops</em> that a packet can go through before reaching it’s destination. If you look at the above traceroute response, you will notice that is has a <code>30 hops max</code>. So, everytime an intermediate router receives an ICMP packet, it decrements the TTL value by 1. If it results in TTL=0, the packet is dropped and an ICMP error message is relayed back to the source IP Address.</p><p>Traceroute uses this property to trace the path of a packet. It first sends a packet with TTL = 1, so at it’s first hop, the value of TTL is decreased to 0 causing the packet to be dropped and an ICMP error message it relayed back to the source IP. Then, a 2nd packet with TTL = 2 is sent and it gets dropped at the 2nd hop and an ICMP error message is relayed back from the point of it’s 2nd hop. So on and so forth at least N numbers of packets are sent untill an <code>ICMP Echo Reply</code> is received from the destination, where N is the number of hops between source and destination hosts.</p><p>It is worthy to note that the packets don’t always take the same route, so it is possible to have different response each time you run traceroute. It is possible that the Host at a certain hop didn’t reply within a certain time limit, in which case the host is skipped in the output.</p><ul class=pa0>
</ul><div class="mt6 instapaper_ignoref">
</div></div><aside class="w-30-l mt6-l">
</aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://maxking.github.io>
&copy; maxking's blog 2022
</a>
<div>
<div class=ananke-socials>
</div></div></div></footer></body></html>